<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Overbrowsing</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <h1>Overbrowsing</h1>
        <select id="categorySelect">
            <option value="">Show All</option>
            <option value="Design Tools">Design Tools</option>
            <option value="Founding Principals">Founding Principals</option>
        </select>
        <div class="feed"></div>
    </div>
    <script type="module">
        import data from "./cache/data.json" assert { type: "json" };
        
        const categorySelect = document.getElementById("categorySelect");
        const feedContainer = document.querySelector(".feed");

        // Function to filter and update the displayed data by category
        function filterDataByCategory(selectedCategory) {
            let filteredHtml = "";
            data.forEach(element => {
                if (!selectedCategory || element.category === selectedCategory) {
                    filteredHtml += "<div>";
                    if (element.title) {
                        filteredHtml += "<h2>" + element.title + "</h2>";
                    }
                    if (element.content) {
                        filteredHtml += "<p>" + element.content + "</p>";
                    }
                    if (element.image) {
                        filteredHtml += "<img class='image' src='cache/images/" + element.id + ".png' loading='lazy' />";
                    }
                    filteredHtml += "</div>";
                }
            });
            feedContainer.innerHTML = filteredHtml;
        }

        // Handle the select change event
        categorySelect.addEventListener("change", (event) => {
            filterDataByCategory(event.target.value);
        });

        // Initialize with all data shown
        filterDataByCategory("");
    </script>
</body>
</html>
